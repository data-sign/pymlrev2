# 8. 텍스트분석
- NLP(National Language Processing) : 인간의 언어를 이해하고 해석하는 기술 
    - 기계 번역, 질의응답 시스템 
- 텍스트 분석 : 비정형 텍스트에서 의미 있는 정보를 추출하는 기술 
    - 텍스트분류 : 문서를 특정 분류 또는 카테고리에 속하는 것을 예측하는 기법. 스팸 메일 검출 등이 해당 
    - 감성 분석 : 텍스트에서 나타나는 감정/판단/믿음/의견/기분 등의 주관적 요소를 분석하는 기법. 소셜 미디어 감성 분석, 긍/부정 리뷰 분석, 여론조사 의견 분석 등에서 활용
    - 텍스트 요약 : 텍스트 내 중요한 주제나 중심 사상 추출. 토픽 모델링이 대표적
    - 텍스트 군집화와 유사도 측정 : 비슷한 유형에 대해 군집화 수행. 

## 8.1 텍스트 분석 이해 
- 비정형 데이터인 텍스트를 분석하는 것. 
- 텍스트를 변환하여 피처 형태로 추출하고 추출된 피처에 의미 있는 값으로 부여하는 것이 중요. 
- 피처 벡터화/피처 추출 : 텍스트를 단어 기반 피처로 추출하고 피처에 단어 빈도수와 같이 숫자값을 부여하여 벡터로 변환
- BOW(Bag of Words), Word2Vec 방법이 있음 
### 텍스트 분석 수행 프로세스 
1. 텍스트 사전 준비작업 : 피처로 만들기 전 대/소문자 변경, 특수문자 삭제 등의 클렌징 작업과 토큰화 적업, 의미 없는 단어(stop word) 제거, 어근 추출 등의 텍스트 정규화 작업
2. 피처 벡터화/추출 : 가공된 텍스트에서 피처 추출 후 벡터 값 할당. BOW, Word2Vec 적용. 
3. ML 모델 수립 및 학습/예측/평가 : 피처 벡터화된 데이터 세트에 ML 모델 적용해 학습/예측/평가 수행

### 파이썬 기반 NLP, 텍스트 분석 패키지 
- NLTK(Natural Language Toolkit for python): 방대한 데이터 세트와 모듈 가지고 있는 대표적 NLP 패키지. 수행 속도가 느려 실제 활용은 적음
- Gensim : 토픽 모델링 분야에서 주로 사용하는 패키지. 
- SpaCy : 수행 성능이 뛰어나 많이 사용 

## 8.2 텍스트 정규화 
### (1) 클렌징
- 텍스트 분석에 방해가 되는 불필요한 문자, 기호 제거. 
- 예) HTML, XML 태그 삭제 
### (2) 토큰화 
#### 문장토큰화 
- 문서에서 문장을 분리하는 문장 토큰화 
- 문장의 마침표, 개행문자 등 문장의 마지막 기호에 따라 분리
- 정규 표현식에 따른 문장 토큰화도 가능
- nltk의 senk_tokenizer 사용  
```python
from nltk import sent_tokenize
import nltk
nltk.download('punkt')

text_sample = 'The Matrix is everywhere its all around us, here even in this room. \
               You can see it out your window or on your television. \
               You feel it when you go to work, or go to church or pay your taxes.'
sentences = sent_tokenize(text=text_sample)
print(type(sentences),len(sentences))
print(sentences)
```

#### 단어토큰화 
- 문장에서 단어를 토큰으로 분리하는 단어 토큰화 
- 공백, 콤마, 마침표, 개행문자 등으로 단어 분리
- 정규 표현식 이용해 토큰화 수행 가능
- 단어 순서가 중요하지 않는 경우 단어 토큰화만 사용 
- nltk word_tokenizer 사용 
- 단어 토큰화 시 문맥적인 의미가 무시되는 단점을 극복하고자 n-gram 도입
- n-gram 은 연속된 n개의 단어를 하나의 토큰 단위로 분리 

### (3) 스톱워드제거
- 분석에 큰 의미 없는 단어(is, the, a, will 등) 제거 
- 필수 문법 요소지만 문맥상 의미가 없는 단어들이 문법적 특성으로 빈번하게 나타나 중요 단어로 인지될 수 있어 사전 제거 필요 
- nlkt에서 stopword 제공 

### (4) Stemming과 Lemmatization
- 과거/현재, 3인칭, 진행형 등 조건에 따라 단어의 형태가 변화하는데 문법적 또는 의미적으로 변화하는 단어의 원형을 찾는 것. 
- Stemming 보다 Lemmatization이 품사와 같은 문법적 요소와 의미적인 부분을 감안해 더 정확하게 찾고, 그래서 더 변환에 오래 걸림. s
- nltk 에서 제공하는 기능  
    - (stemmer) : Porter, Lancaster, Snowball Stemmer 
    - (Lemmatization) : WordNetLemmatizer